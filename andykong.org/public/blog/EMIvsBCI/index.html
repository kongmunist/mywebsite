<!DOCTYPE html>
<html lang="en">
<head>

<title>
    Andy Kong!
</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

    
        <meta name="author" content="Andy Kong">
        <meta name="title" content="EEG fails in the prescence of household EMI">
        <meta name="description" content="I am beginning to have doubts on the feasibility of everday BCIs...">
        <meta name="keywords" content=" eeg,  bci,  emi,  thoughts, ">
    






    
    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
    <link rel="stylesheet" type="text/css" href="/static/bootstrap.min.css">

    <!-- <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible&display=swap" rel="stylesheet"> -->

    <!-- <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=Ubuntu&display=swap" rel="stylesheet"> -->
    

    <style type="text/css">
        /* Atkinson Hyperlegible */
        /* latin-ext */
        @font-face {
          font-family: 'Atkinson Hyperlegible';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v7/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G07JIoWQeCbGWn.woff2) format('woff2');
          unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
        }
        /* latin */
        @font-face {
          font-family: 'Atkinson Hyperlegible';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url(https://fonts.gstatic.com/s/atkinsonhyperlegible/v7/9Bt23C1KxNDXMspQ1lPyU89-1h6ONRlW45G04pIoWQeCbA.woff2) format('woff2');
          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }

        /* Ubuntu */
        /* latin-ext */
        @font-face {
          font-family: 'Ubuntu';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url(https://fonts.gstatic.com/s/ubuntu/v15/4iCs6KVjbNBYlgoKcQ72nU6AF7xm.woff2) format('woff2');
          unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
        }
        /* latin */
        @font-face {
          font-family: 'Ubuntu';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url(https://fonts.gstatic.com/s/ubuntu/v15/4iCs6KVjbNBYlgoKfw72nU6AFw.woff2) format('woff2');
          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>

    <script src="/static/fontawesome.js" defer></script>
    <!-- <script src="https://kit.fontawesome.com/c62dcd5933.js"></script> -->

    <!-- Instant Page inlined - source is instant.page/5.1.0 -->
    <script src="/static/instantpage-5.1.0.js" type="module" defer></script>




    <style>
body {
background: #202222;
/*font-family: 'Fira Sans Condensed', sans-serif;*/
/*font-family: 'Roboto Slab', sans-serif;*/
font-size:1.2em;
/*font-family: 'Roboto Slab', sans-serif;*/

font-family: 'Ubuntu', sans-serif;
}

.navlinks{
    font-family: 'Atkinson Hyperlegible', sans-serif;
    font-size: 1.2em;
}

h1, h2, h3, h4, h5, h6{
    /*font-family: 'Ubuntu', sans-serif;*/
    font-family: 'Atkinson Hyperlegible', sans-serif;
    /*font-size: 1.2em;*/
    /*letter-spacing: 1px;*/
}


a {
    transition: color .2s linear;
    color:#00B4CC;
}

a:hover {
    color:#00DFFC;
    text-decoration: none;
}

.navbar-custom {
    font-size: 22px;
    background-color: #202222 !important;
}

.navbar-custom .navbar-brand{
    font-size: 30px;
    color: #00dffc !important;
}

.navbar-custom .navitem{
    color:#00dffc !important;
}

.navitem:hover{
    color:#00b4cc !important;
    text-decoration: none;
}

.hidden{
  display: none;
}

.navbar-toggler-icon {
  border: none;
  outline: none;
}

.caption{
    font-size:12px;
    text-align: center;
    font-style: italic;
    margin-bottom: .2em;
    margin-top: 1em;
}

.projectpage img{
    max-width: 100%;
    max-height: 50vh;
    height: auto;
    width: auto;
}

.blogpage img{
    max-width: 100%;
    max-height: 50vh;
    height: auto;
    width: auto;
    display: block !important;
    margin: 0 auto !important;
}

.blogpage h1, .blogpage h2{
    color: #D49E68;
    margin-top:
}

hr{
    background-color:white !important;
}

.video-container {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%;
}

.youtubevideo {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

code {
  font-family: Consolas,"courier new";
  color: #110000;
  background-color: #AFAFAF;
  padding: 2px;
  font-size: 105%;
}

</style>


    <link rel="icon" type="image/png" href=" /static/aklogo.png " />
    

</head>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YNX5JQZWHT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YNX5JQZWHT');
</script>

<body style="color:#F8E0CB;overflow-x: hidden;">



<nav class="navbar navbar-expand-md navbar-dark bg-dark navbar-custom">
    <a class="navbar-brand" aria-label="Link to homepage in the navbar" style="height:50px; padding-left:10px;" href="/"><img src="/static/aklogo.png" alt="Andy Kong's logo" height="50px" style="margin-top:0px;margin-bottom:10px" /></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon hidden" style="background-color:#00b4cc;">
      <i class="fab fa-buffer fa-2x" style="color:#00b4cc; ">
          </span>
        </i>
    </button>

    <div class="collapse navbar-collapse " id="navbarSupportedContent" style="margin-left:25px;margin-top:10px">
        <ul class="navbar-nav ml-auto navlinks">
            <li class="nav-item">
                <a class="nav-link navitem" href="/static/resume.pdf ">CV/Resume</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="https://github.com/kongmunist" target="_blank" title="Github">GitHub</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="https://twitter.com/oldestasian" target="_blank" title="Twitter">Twitter</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="mailto:andyking99@gmail.com" target="_blank" title="Email">Email</a>
            </li>


            <li class="nav-item">
                <a class="nav-link navitem" href="/blog/">[Blog]</a>
            </li>
        </ul>
    </div>
</nav>


    <div class="row justify-content-center" style = "height:100vh; width: 100vw; padding-left:30px; padding-right:0px;">
<!-- padding-left:20px; padding-right:20px -->
            <div class="col-md-8 col-11 p-0" style="">
                <!-- <div class="container-fluid img-rounded shadow-lg px-4 d-flex " style="padding-top:20px;padding-bottom:20px;  border-radius:20px;text-overflow:ellipsis;width:100%;"> -->

                

<!--<style>-->
<!--    h1{-->
<!--  margin-top: 1em;-->
<!--}-->
<!--</style>-->

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

        


<div class="blogpage overflow-hidden">
    <h1 style="margin-bottom:0px; margin-top:1em; font-size:2.5em;">EEG fails in the prescence of household EMI</h1>
            <p style="font-size:0.8em;"> Published January 17, 2021</p>
<hr>
            <p>Hello!</p>
<p>Yesterday I ran several experiments on my EEG (electroencephalography) headset. You always start with something you know is working — in this case, I checked the impedance (low, 10kΩ instead of the usally 400kΩ), then performed the closed-eye alpha spike test (check <a href="../bcieyeclosedetection">here</a> if you don't know what I'm talking about). It worked, so I moved on to trying to evoke an SSVEP with a 15Hz flashing light. I had just built this structure for blinking 3W LEDs that looks vaguely like an apartment front architecture student would have to design in a class, and it worked wonderfully. The SSVEP is evoked most strongly from 10-20Hz, with a peak around 15Hz. I used 15Hz, and the peak was as large as the closed-eye alpha waves, which are the strongest EEG signal discovered. Basically, it was working fine. </p>
<p class="caption">Picture of the apartment-shaped blinker, Arduino controlled MOSFETs and a CC source made from 1W resistors and an LM317 to drive the big LEDs.</p>
<p><img alt="Picture of the apartment-shaped blinker, Arduino controlled MOSFETs and a CC source made from 1W resistors and an LM317 to drive the big LEDs." src="/static/aptblinker.jpg" /></p>
<p>At this point my laptop began running low, so I plugged it into the wall. The next 2 hours I spent running experiments, trying new signal averaging techniques. However, none of them seemed to be working — there was this constant randomness to the signal. Since I had just checked whether the headset measured EEG properly, I thought for sure that new technique just didn't work. I made the experiments simpler and simpler, and eventually I went back to doing the closed-eye thing. Guess what? Our nice consistent graphs had tanked, and were now noisy as hell with the peak barely discernible. </p>
<p>I started considering environmental factors, like EMI emission from the things near me. I knew the apartment blinker setup didn't throw off that much EMI — I had put it across the table, and checked to make sure that the 15Hz didn't just spike all the time. Since it had worked earlier, I knew the EMI pick-up was much lower than the SSVEP signal (which is very small, under 10 microvolts). My laptop finished charging, so I unplugged it and tried my alpha test again. And it worked perfectly :(. It was the charger! </p>
<p class="caption">Still from the video "Removing RFI Noise from MacBook Power Supply
"</p>
<p><img alt="Still from the video &quot;Removing RFI Noise from MacBook Power Supply
&quot;" src="/static/macbookrfi.jpg" /></p>
<p>I'm no expert, but modern laptop chargers pass a huge amount of DC current from the AC wall, and usually convert it using a switching power converter instead of a linear DC converter. They're usually more efficient (80% vs 60%), which you care about when you're passing 80+ watts to charge a computer battery. However, they generate a lot of high frequency noise because they have to switch constantly, on and off, to produce a stable current. Most of my info here I read a <a href="http://www.righto.com/2015/11/macbook-charger-teardown-surprising.html">teardown by Ken Shirriff</a>, but I also found a <a href="https://t.co/cDLqXJmekF?amp=1">Youtube video</a> which shows how to reduce EMI produced by a Macbook MagSafe (though an older version). </p>
<p>Though the EEG board I'm using doesn't have a physical connection to my laptop, it did sit right next to my laptop as it charged. The Macbook grounds itself to its chassis, which means that there should be some radiated EMI from the casing itself to nearby devices (I can see this on the EEG output as increased 60Hz noise when I touch my laptop — even when it's not plugged into the wall!). Since EEG is so sensitive, I think the proximity to my charging laptop is what did my signal in ;(. Wack!</p>
<h2>Discussion</h2>
<p>It's fine that I have to redo the experiments, but my main concern is for the usefulness of EEG in daily settings. I mean, brain-computer interfaces are the future of HCI (in my opinion); they're useless if they can't work in the presence of everyday electrical noise.</p>
<p>I started using the SSVEP because it's a stable, high bandwidth signal, but if the alpha spike can't even function in the presence of noise then I don't know what can. </p>
<p class="caption">The alpha wave spike when your eyes close is one of the strongest EEG signals</p>
<p><img alt="The alpha wave spike when your eyes close is one of the strongest EEG signals" src="/static/emialphaspike.png" /></p>
<p>Maybe if we shielded the board it'd be slightly better, but even then the cables have a decent amount of pickup, as does my conductive, sacks-of-saltwater body. Maybe shielded cables and boards will have to be the norm? But then if a person touches the box, it'll still couple noise into the whole system. It seems intractable, considering our power systems are too ingrained to change now, and our brain signals aren't getting any stronger (In fact, if you go on Facebook, they seem to be getting weaker... /s). The future of BCI may not last very long...</p>

    
        <hr>
        <p style="line-height:250%;">
        <a class="btn btn-info" href="/tagged/eeg/">eeg</a>

        
            &nbsp;
            <a class="btn btn-info" href="/tagged/bci/">bci</a>
        
            &nbsp;
            <a class="btn btn-info" href="/tagged/emi/">emi</a>
        
            &nbsp;
            <a class="btn btn-info" href="/tagged/thoughts/">thoughts</a>
        
        </p> 
    
</div>




                    </div>
                    <br>
        <!-- </div> -->
</div>




<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>