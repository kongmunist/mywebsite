<!DOCTYPE html>
<html lang="en">
<head>

<!-- <title>
    Andy Kong!
</title> -->

<meta name="viewport" content="width=device-width, initial-scale=1.0">

    
        <meta name="author" content="Andy Kong">
        <meta name="title" content="Hello World for Brain-Computer Interfaces">
        <meta name="description" content="Detecting alpha wave activity with EEG to predict whether my eyes are open or closed">
        <meta name="keywords" content=" BCI,  EEG, ">

        <title>
            Hello World for Brain-Computer Interfaces | Andy Kong
        </title>
    


    <style type="text/css">
        /* Atkinson Hyperlegible */
        /* latin-ext
        @font-face {
          font-family: 'Atkinson Hyperlegible';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url("/static/atkhyp_latext.woff2") format('woff2');
          unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
        } */
        /* latin */
        @font-face {
          font-family: 'Atkinson Hyperlegible';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url("/static/atkhyp_lat.woff2") format('woff2');
          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }


        /* Ubuntu */
        /* latin-ext
        @font-face {
          font-family: 'Ubuntu';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url("/static/ubuntu_latext.woff2") format('woff2');
          unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
        } */
        /* latin */
        @font-face {
          font-family: 'Ubuntu';
          font-style: normal;
          font-weight: 400;
          font-display: swap;
          src: url("/static/ubuntu_lat.woff2") format('woff2');
          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>

    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"> -->
    <link rel="stylesheet" type="text/css" href="/static/bootstrap.min.css">

    <script src="/static/fontawesome.js" defer></script>
    <!-- <script src="https://kit.fontawesome.com/c62dcd5933.js"></script> -->

    <!-- Instant Page inlined - source is instant.page/5.1.0 -->
    <script src="/static/instantpage-5.1.0.js" type="module" defer></script>




    <style>
body {
    background: #202222;
    font-size: 1.2em;
    font-family: 'Ubuntu', sans-serif;
}

.navlinks{
    font-family: 'Atkinson Hyperlegible';
    font-size: 1.2em;
}

h1, h2, h3, h4, h5, h6{
    font-family: "Atkinson Hyperlegible";
}


a {
    transition: color .2s linear;
    color:#00B4CC;
}

a:hover {
    color:#00DFFC;
    text-decoration: none;
}

.navbar-custom {
    font-size: 22px;
    background-color: #202222 !important;
}

.navbar-custom .navbar-brand{
    font-size: 30px;
    color: #00dffc !important;
}

.navbar-custom .navitem{
    color:#00dffc !important;
}

.navitem:hover{
    color:#00b4cc !important;
    text-decoration: none;
}

.hidden{
  display: none;
}

.navbar-toggler-icon {
  border: none;
  outline: none;
}

.caption{
    font-size:12px;
    text-align: center;
    font-style: italic;
    margin-bottom: .2em;
    margin-top: 1em;
}

.projectpage img{
    max-width: 100%;
    max-height: 50vh;
    height: auto;
    width: auto;
}

.blogpage img{
    max-width: 100%;
    max-height: 50vh;
    height: auto;
    width: auto;
    display: block !important;
    margin: 0 auto !important;
}

.blogpage h1, .blogpage h2{
    color: #D49E68;
}

.projectpage h1, .projectpage h2{
    color: #D49E68;
}

hr{
    background-color:white !important;
}

.video-container {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%;
}

.youtubevideo {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

code {
  font-family: Consolas,"courier new";
  color: #110000;
  background-color: #AFAFAF;
  padding: 2px;
  font-size: 105%;
}

</style>

    <link rel="icon" type="image/png" href=" /static/aklogo.png " />

        <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YNX5JQZWHT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YNX5JQZWHT');
</script>
<script data-goatcounter="https://kong.goatcounter.com/count"
                    async src="//gc.zgo.at/count.js"></script>
    
</head>



<body style="color:#F8E0CB;overflow-x: hidden;">



<nav class="navbar navbar-expand-md navbar-dark bg-dark navbar-custom">
    <a class="navbar-brand" aria-label="Link to homepage in the navbar" style="height:50px; padding-left:10px;" href="/"><img src="/static/aklogo.png" alt="Andy Kong's logo" height="50px" style="margin-top:0px;margin-bottom:10px" /></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon hidden" style="background-color:#00b4cc;">
      <i class="fab fa-buffer fa-2x" style="color:#00b4cc; ">
          </span>
        </i>
    </button>

    <div class="collapse navbar-collapse " id="navbarSupportedContent" style="margin-left:25px;margin-top:10px">
        <ul class="navbar-nav ml-auto navlinks">
            <li class="nav-item">
                <a class="nav-link navitem" href="/static/AndyKongCV.pdf ">CV/Resume</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="https://github.com/kongmunist" target="_blank" title="Github">GitHub</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="https://twitter.com/oldestasian" target="_blank" title="Twitter">Twitter</a>
            </li>
            <li class="nav-item">
                <a class="nav-link navitem" href="mailto:andyking99@gmail.com" target="_blank" title="Email">Email</a>
            </li>


            <li class="nav-item">
                <a class="nav-link navitem" href="/blog/">[Blog]</a>
            </li>
        </ul>
    </div>
</nav>


    <div class="row justify-content-center" style = "height:100vh; width: 100vw; padding-left:30px; padding-right:0px;">
<!-- padding-left:20px; padding-right:20px -->
            <div class="col-md-8 col-11 p-0" style="">
                <!-- <div class="container-fluid img-rounded shadow-lg px-4 d-flex " style="padding-top:20px;padding-bottom:20px;  border-radius:20px;text-overflow:ellipsis;width:100%;"> -->

                
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

        


<div class="blogpage overflow-hidden" style="margin-bottom:4em;">
    <h1 style="margin-bottom:0px; margin-top:1em; font-size:2.5em;">Hello World for Brain-Computer Interfaces</h1>
            <p style="font-size:0.8em;"> Published December 31, 2020</p>
<hr>
            <p>Hello! I'm gonna tell you everything I know about the most consistently evoked signal in all of EEG and how to detect it — the closed-eye <a href="https://en.wikipedia.org/wiki/Alpha_wave">alpha wave</a> spike.</p>
<blockquote class="twitter-tweet tw-align-center"><p lang="en" dir="ltr">Detecting whether eyes are open/closed using <a href="https://twitter.com/hashtag/EEG?src=hash&amp;ref_src=twsrc%5Etfw">#EEG</a> alpha wave activity<a href="https://t.co/OnwhTsJSsa">pic.twitter.com/OnwhTsJSsa</a></p>&mdash; Andy (@redlightguru) <a href="https://twitter.com/redlightguru/status/1344538994235875328?ref_src=twsrc%5Etfw">December 31, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><br></p>
<p>This alpha wave signal is used to confirm that EEG electrodes are set up to sample brainwaves properly, and not just sampling the atmosphere's noise (which unfortunately looks a lot like passive brainwave activity).</p>
<p>Because the spike in alpha wave activity happens when your eyes are closed, this makes personally seeing it rather hard — you have to do a screen record or otherwise plot the amplitude to be able to see the spike after you've opened your eyes.</p>
<h2>Experimental Setup</h2>
<p>Data are being recorded on a single channel of the OpenBCI Ganglion EEG board. The electrode placements are as follows: GND on right earlobe, Channel 1 (-) on left earlobe, and Channel 1 (+) on position Oz of the 10-20 international system. </p>
<p>Oz is right over the occipital region of the brain, near the bump on the middle-back of your head (this is called the inion). Sample rate is 200Hz, safety from being shocked in the brain by mains insured by the board streaming samples to my laptop over Bluetooth.</p>
<p class="caption">Picture of the Ganglion board, with two earlobe electrodes and the scalp electrode. It's spiky to go through hair</p>
<p><img loading="lazy" alt="Picture of the Ganglion board, with two earlobe electrodes and the scalp electrode. It's spiky to go through hair" src="/static/alphawaves_electrodes.jpg" /></p>
<p>Once streamed onto the computer over BrainFlow (I made <a href="../workingwithbrainflow1" target="_blank">another blog post</a> about that), the data are filtered using SciPy's IIR filters. Mainly, a 60Hz notch filter and 5-75Hz bandpass filter, with 40dB attenuation for the stopband. These are applied with the <code>scipy.signal.filtfilt()</code> function. I don't know if the dB number is like power (div by 20 then take the logarithm) or normal (div by 10 then take the logarithm), but the stopband is completely flat either way so I don't really mind. </p>
<p>FFT is calculated using <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.welch.html">Welch's method</a>. Alpha band integration is as simple as adding up all the magnitude contributions from frequencies in the band 7-13Hz, but Brainflow has a built-in function for doing this (if you use this, make sure you feed in the tuple as (power, freqs) instead of the (freqs, power) that <code>scipy.signal.welch()</code> gives you). That's it!</p>
<p>Implementation: I'm creating a live plot using a matplotlib animation. The indicator is drawn on-graph as both text and an emoji. </p>
<h2>Results</h2>
<p>Eyes closed are pretty reliably detected by a spike, with a lag of about a second. Eyes opening, the alpha waves drop about as fast as they rise. This is probably due to my EEG data window being 5 seconds, since I'm not doing any averaging that would otherwise slow it down. </p>
<p class="caption">Graph of baseline alpha wave activity</p>
<p><img loading="lazy" alt="Graph of baseline alpha wave activity" src="/static/alphawaves_eyesopen.png" /></p>
<p class="caption">Vastly increased alpha wave activity when user's eyes are closed</p>
<p><img loading="lazy" alt="Vastly increased alpha wave activity when user's eyes are closed" src="/static/alphawaves_eyesclosed.png" /></p>
<h2>Reliability problems</h2>
<p><em>Within session</em>, I had no problems with reliability. I saw my average alpha activity around 8 uV^2, and it went above 12 or so with my eyes closed so I set that as the breakpoint. However, alpha activity also decreases with increase in drowsiness, and I finished this pretty late last night, so it could not work for me right now (not drowsy) the way the breakpoints are set.</p>
<p>I believe the baseline alpha activity varies from person to person, so the threshold would probably have to be adjusted for new people. </p>
<p>I think that's it for now. Follow me on <a href="https://twitter.com/redlightguru">Twitter</a>!</p>

    
        <hr>
        <p style="line-height:250%;">
        <a class="btn btn-info" href="/tagged/BCI/">BCI</a>

        
            &nbsp;
            <a class="btn btn-info" href="/tagged/EEG/">EEG</a>
        
        </p> 
    
</div>




                    </div>
                    <br>
        <!-- </div> -->
</div>




<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>-->
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->
<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
<script src="/static/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>-->
<script src="/static/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>-->
<script src="/static/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>